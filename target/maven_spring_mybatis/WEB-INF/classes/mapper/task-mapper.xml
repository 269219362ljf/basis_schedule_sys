<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 定义命名空间 -->
<mapper namespace="mapperNS.Task" >

    <!-- 查询全部任务信息 -->
    <select id="queryTask"   resultType="Task" >
        SELECT task_id, name, des, type, st, para, prior, beg_time, end_time, cost, avg_cost
	    FROM t_task
    </select>

    <!-- 查询全部任务可执行列表 -->
    <select id="queryAbleRunningTaskList"   resultType="Task_List" >
        SELECT task_id, st, t_date
        FROM t_task_list
        WHERE st=0
    </select>

    <!-- 初始化任务执行列表 -->
    <insert id="initTaskList" >
        insert into t_task_list
            select task_id,0 as st,replace(current_date::varchar,'-','') as t_date
            from t_task
    </insert>

    <!-- 插入数据 -->
    <insert id="insertTest" parameterType="Test" keyProperty="test_id" >
        insert into test values (
        #{test_name}
        )
    </insert>

    <!-- 更新数据 -->
    <update id="updateTest" parameterType="Test">
        update test set test_name=#{test_name} where test_id=#{test_id}
    </update>

    <!-- 删除数据 -->
    <delete id="deleteUser" parameterType="int">
        delete from test where test_id=#{test_id}
    </delete>

</mapper>